[tox]
envlist =
    py{27}-Plone{43,50,51}

skip_missing_interpreters = False

[testenv]
skip_install = true

extras =
    develop
    test

setenv =
    Plone43:
        - VERSION_FILE=version_plone43.cfg
    Plone50:
        - VERSION_FILE=version_plone50.cfg
    Plone51:
        - VERSION_FILE=version_plone51.cfg

commands =
    {envbindir}/buildout -c {toxinidir}/{env:VERSION_FILE} buildout:directory={envdir} buildout:develop={toxinidir} bootstrap
    {envbindir}/buildout -c {toxinidir}/{env:VERSION_FILE} buildout:directory={envdir} buildout:develop={toxinidir} annotate
    {envbindir}/buildout -c {toxinidir}/{env:VERSION_FILE} buildout:directory={envdir} buildout:develop={toxinidir}
    coverage run {envbindir}/test -v1 --auto-color {posargs}

deps =
    setuptools==36.2.1
    zc.buildout==2.8.0
    coverage
